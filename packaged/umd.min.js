!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.CanvasXML=o():e.CanvasXML=o()}(self,(()=>(()=>{"use strict";var e={},o=0,n=!1,t=!1,d=void 0,i=void 0,r=[],c=[],f=[],s=[],p=[],a=void 0;const v=e=>{e.hooks.forEach((e=>{"function"==typeof e.effectPrevious&&e.type===u&&r.push((()=>e.effectPrevious()))})),e.hooks.forEach((e=>{"function"==typeof e.effectPrevious&&e.type===k&&e.effectPrevious()})),e.children.forEach((e=>v(e)))},y=e=>{var o={element:e,key:void 0,type:void 0,children:[],hooks:[],memo:void 0,update:void 0,create:void 0,parent:void 0};return!0===Boolean(e)&&"object"==typeof e||(o.type=1),!0===Boolean(e)&&"object"==typeof e&&"function"==typeof e.tag&&(o.type=8,o.key=e.key),!0===Boolean(e)&&"object"==typeof e&&"string"==typeof e.tag&&(o.type=64,o.key=e.key),!0===Boolean(e)&&"object"==typeof e&&!0===Array.isArray(e)&&(o.type=512,o.key=e.key),o},l=e=>{i={hooks:e.hooks,index:0,node:e};var o=[],n=[],t=[];return 8!==e.type||!0===e.memo&&!0!==s.includes(e)||(o=new Array(e.element.tag({...e.element.props,children:e.element.props.children||e.element.children}))),64!==e.type||!0===e.memo&&!0!==s.includes(e)||(o=e.element.props.children||e.element.children,!1===Array.isArray(o)&&(o=[o])),512!==e.type||!0===e.memo&&!0!==s.includes(e)||(o=e.element),1!==e.type&&!0===e.memo&&!0!==s.includes(e)&&(o=e.children.map((e=>e.element))),t=e.children,o.forEach(((o,d)=>{var i,r,c=e.children.findIndex((e=>e&&o&&"object"==typeof e&&"object"==typeof o&&void 0!==e.key&&e.key===o.key&&e.element.tag===o.tag));-1!==c&&(i=e.children[c]),-1===c&&(i=e.children[d]);var f=y(o);const s=Boolean(i&&i.element===o),p=Boolean(i&&i.element&&i.type===f.type&&i.key===f.key&&i.element.tag===f.element.tag)&&!1===s;!0!==s&&!0!==p||(r=i),!0===p&&(r.element=f.element,r.key=f.key,r.type=f.type),!1===s&&!1===p&&(r=f),r.memo=s,r.update=p,r.create=!1===s&&!1===p,r.parent=e,!0!==s&&!0!==p||(t=t.filter((e=>e!==i))),n.push(l(r))})),e.children=n,t.forEach((e=>v(e))),e.hooks.forEach((e=>{"function"==typeof e.effect&&e.type===x&&e.effect()})),i=void 0,e},m=()=>{if(void 0===a){const e=performance.now();e-o<0&&(a=requestAnimationFrame((()=>{a=void 0,m()}))),(e-o>0||e-o==0)&&(a=requestAnimationFrame((()=>{for(a=void 0,o=e,s=Array.from(new Set(f)),p=s.filter((e=>{for(var o=!0;!0===o&&e.parent;)e=e.parent,o=s.every((o=>o!==e));return o})),f=[],n=!0,p.forEach((e=>l(e))),c(d);0!==r.length;)r.shift()();n=!1,s=[],p=[],t&&t!==(t=!1)&&m()})))}},h=e=>(...o)=>{try{if(void 0!==i.hooks[i.index]&&i.hooks[i.index].type!==e)throw Error(e);return e(...o)}finally{i.hooks[i.index].type=e,i.index=i.index+1}},u=(e,o)=>{var n;void 0===n&&(n=i.hooks[i.index]),void 0===n&&(n={effect:e}),i.hooks[i.index]=n,(void 0===n.dependence||n.dependence.some(((e,n)=>e!==o[n])))&&r.push((()=>n.effectPrevious=n.effectPrevious&&"function"==typeof n.effectPrevious?n.effectPrevious():void 0)),(void 0===n.dependence||n.dependence.some(((e,n)=>e!==o[n])))&&r.push((()=>n.effectPrevious=e())),n.dependence=o},k=(e,o)=>{var n;void 0===n&&(n=i.hooks[i.index]),void 0===n&&(n={effect:e}),i.hooks[i.index]=n,(void 0===n.dependence||n.dependence.some(((e,n)=>e!==o[n])))&&(n.effectPrevious=n.effectPrevious&&"function"==typeof n.effectPrevious?n.effectPrevious():void 0),(void 0===n.dependence||n.dependence.some(((e,n)=>e!==o[n])))&&(n.effectPrevious=e()),n.dependence=o},x=(e,o)=>{var n;void 0===n&&(n=i.hooks[i.index]),void 0===n&&(n={effect:e}),i.hooks[i.index]=n,(void 0===n.dependence||n.dependence.some(((e,n)=>e!==o[n])))&&(n.effect=e),n.dependence=o};return h((e=>{var o;void 0===o&&(o=i.hooks[i.index]),void 0===o&&(o={state:e}),i.hooks[i.index]=o;const d=i.node;return[o.state,e=>{const i=o.state;"function"==typeof e&&(o.state=e(o.state)),"function"!=typeof e&&(o.state=e),o.state!==i&&(e=>{f=[...f,e],!0===n&&(t=!0),!0!==n&&m()})(d)}]})),h((e=>{var o;return void 0===o&&(o=i.hooks[i.index]),void 0===o&&(o={current:e}),i.hooks[i.index]=o,o})),h(u),h(x),h(k),h(((e,o)=>{var n;return void 0===n&&(n=i.hooks[i.index]),void 0===n&&(n={memo:e}),i.hooks[i.index]=n,(void 0===n.dependence||n.dependence.some(((e,n)=>e!==o[n])))&&(n.memo=e()),n.dependence=o,n.memo})),h(((e,o)=>{var n;return void 0===n&&(n=i.hooks[i.index]),void 0===n&&(n={callback:e}),i.hooks[i.index]=n,(void 0===n.dependence||n.dependence.some(((e,n)=>e!==o[n])))&&(n.callback=e),n.dependence=o,n.callback})),e.default})()));